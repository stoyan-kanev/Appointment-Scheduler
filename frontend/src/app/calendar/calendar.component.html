<section class="booking-wrapper">
    <div class="form-wrapper">
        <div class="calendar-container">
            <p class="error">
                {{ error }}

            </p>
            <div class="barber-select-wrapper">
                <label for="barberSelect">–ò–∑–±–µ—Ä–∏ –±–∞—Ä–±—ä—Ä</label>
                <select
                    id="barberSelect"
                    class="barber-select"
                    [(ngModel)]="selectedBarber"
                    name="barber"
                    (change)="selectBarber(selectedBarber)"
                >
                    <option disabled selected value="">-- –ò–∑–±–µ—Ä–∏ –±–∞—Ä–±—ä—Ä --</option>
                    <option *ngFor="let barber of barbers" [value]="barber">
                        {{ barber }}
                    </option>
                </select>
            </div>
            <div class="calendar-header">
                <button mat-icon-button (click)="changeMonth(-1)">
                    <mat-icon>chevron_left</mat-icon>
                </button>
                <h2>{{ currentDate | date: 'MMMM yyyy' }}</h2>
                <button mat-icon-button (click)="changeMonth(1)">
                    <mat-icon>chevron_right</mat-icon>
                </button>
            </div>

            <div class="calendar-grid">
                <div class="day-label" *ngFor="let day of dayNames">{{ day }}</div>
                <div
                    class="day-cell"
                    *ngFor="let day of daysInMonth"
                    [class.today]="isToday(day?.date)"
                    [class.selected]="selectedDay === (day?.date | date:'yyyy-MM-dd')"
                    (click)="selectDay(day)"
                >
                    {{ day?.date?.getDate() }}
                </div>
            </div>


            <div class="time-slots" *ngIf="showSlots && selectedDay">
                <h3>Available Times</h3>
                <div class="time-grid">
                    <button
                        *ngFor="let time of getSelectedDaySlots()"
                        class="time-btn"
                        [disabled]="isSlotReserved(time)"
                        (click)="openReservationPopup(time)"
                    >
                        {{ time }}
                    </button>
                </div>
            </div>
        </div>
        <div class="inline-form" *ngIf="showForm">
            <h2 class="title">RESERVE NOW</h2>
            <div class="selected-slot">
                üìÖ <strong>{{ selectedDay }} –æ—Ç {{ selectedSlot }}</strong>
            </div>

            <form [formGroup]="reservationForm" (ngSubmit)="submitForm()">
                <mat-form-field appearance="fill">
                    <input matInput formControlName="first_name" placeholder="–ò–º–µ..."/>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <input matInput formControlName="last_name" placeholder="–§–∞–º–∏–ª–∏—è..."/>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <input matInput formControlName="email" placeholder="–ò–º–µ–π–ª –∞–¥—Ä–µ—Å..."/>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <input matInput formControlName="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω..."/>
                </mat-form-field>

                <div class="form-actions">
                    <button mat-button color="warn" type="button" (click)="showForm = false">‚ùå –û—Ç–∫–∞–∑</button>
                    <button mat-raised-button color="primary" type="submit" [disabled]="reservationForm.invalid">
                        ‚úÖ –ü–æ—Ç–≤—ä—Ä–¥–∏
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

